.. title: "Classify VistA Data formatting"

============================================
Creating the JSON for "Classify VistA Data"
============================================

The "Classify VistA Data" page accepts uploads of JSON information and attempts

Generating from the OSEHRA Testing Repository
---------------------------------------------

The JSON information that the page expects to be uploaded is generated by the
FileManGlobalDataParser script. See the `Generate ViViaN and Dox`_ for
instructions on how to execute that task.

Generating from another source
------------------------------

To generate information from a different source in the expected form for the
ViViaN page to ingest, there are a few rules that should be adhered to beyond
the usual JSON rules (no duplication of keys, etc.)  These rules are.

* Each piece of data within each entry must maintain a string as an identifier
  followed by a ":"
* Data with multiple entries must continue to use that text value as labels for
  entries within the data.

For example,  here is an entry from a file in VistA.

{
    "1": {
        ".01": "NAME: BLACK, NOT OF HISPANIC ORIGIN",
        "100": "SYNONYM: {{SYNONYM: NEGRO}, {SYNONYM: AFROAMERICAN}}",
        "2": "ABBREVIATION: 4",
        "200": "INACTIVE: YES",
        "202": "INACTIVATION DATE: 2003-01-09 00:00:00"
    },

Note that each value, for example ``.01``, has a corresponding text value,
``NAME``.  Each of these values will be used as part of the display when
selecting the values for the pi chart to display.

As part of the ``100`` or ``SYNONYM`` entry, one can see the repeated use of
the string to indicate the multiple entries within that value.

  "100": "**SYNONYM**: {{**SYNONYM**: NEGRO}, {**SYNONYM**: AFROAMERICAN}}",
  
.. _`Generate ViViaN and Dox`: https://github.com/OSEHRA/VistA/blob/master/Documentation/generateViViaNAndDox.rst#4generate-vivian-data-and-dox